/*
 * Patches for the MT9V126 CMOS Image Sensor from Aptina
 *
 * Copyright (C) 2010-2013, Alban Bedel <alban.bedel@avionic-design.de>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#include <linux/types.h>
#include "mt9v126_driver.h"

#define ROUND_CODE_SIZE(n) (((n)+1)/2*2)

#define PATCH_CODE(version, size)					\
	static const u8 patch_##version##_code[ROUND_CODE_SIZE(size)]

#define PATCH(version, fw, loader_addr, code_addr, size)	\
	PATCH_CODE(version, size);				\
	static const struct mt9v126_patch patch_##version =	\
	{							\
		code_addr, loader_addr, version, fw,		\
		size, patch_##version##_code			\
	};							\
	PATCH_CODE(version, size)

/*
 * The Overlay ‘time-code’ example patch:
 * This patch adds a new background task that waits for Overlay
 * start-of-frame events. It then uses the character generator to
 * display a unique time-code pre-frame.
 */
PATCH(0x0111, 0x01030611,
	0x092C, 0xE7A8, 514) = {
	0xc0, 0xf1, 0x0c, 0xae, 0x07, 0x80, 0xc1, 0xa4,
	0x09, 0x1e, 0x04, 0x20, 0x75, 0x08, 0x08, 0xd1,
	0x00, 0x10, 0x8d, 0x09, 0xe0, 0x01, 0xad, 0x09,
	0x08, 0x0b, 0x00, 0x1e, 0x8d, 0x07, 0xe0, 0x01,
	0xad, 0x07, 0x8d, 0x08, 0xe0, 0x80, 0xd8, 0x19,
	0x20, 0xca, 0x07, 0xa1, 0x8d, 0x47, 0xdf, 0x00,
	0x8d, 0x26, 0x0a, 0x0f, 0x00, 0x01, 0xad, 0xe7,
	0x69, 0x01, 0x79, 0x0f, 0xad, 0x06, 0x8d, 0x05,
	0x09, 0x0d, 0x0f, 0x11, 0xad, 0xe6, 0x68, 0x21,
	0x78, 0x2f, 0xad, 0x25, 0x8d, 0xc4, 0x08, 0x0f,
	0x0f, 0x11, 0xad, 0xe5, 0x6e, 0x01, 0x7e, 0x0f,
	0xad, 0x04, 0xe6, 0xe4, 0xf4, 0x03, 0xad, 0xe4,
	0xde, 0x00, 0x70, 0xc9, 0x0d, 0x2a, 0x07, 0xa0,
	0xd9, 0x0a, 0x26, 0x86, 0x1d, 0x7f, 0xbe, 0x04,
	0x78, 0xc5, 0xc0, 0x61, 0x8d, 0x05, 0x0d, 0x1a,
	0x07, 0xa0, 0xd9, 0x0a, 0xb8, 0x04, 0x20, 0x45,
	0x02, 0x80, 0x1c, 0x05, 0x30, 0x02, 0x8d, 0x05,
	0x0d, 0x06, 0x07, 0xa0, 0xd9, 0x0a, 0x21, 0x85,
	0x08, 0x02, 0x1c, 0x06, 0x30, 0x42, 0x8d, 0x06,
	0x0c, 0xf6, 0x07, 0xa0, 0xd9, 0x0a, 0xb9, 0x04,
	0x78, 0x25, 0x1c, 0x07, 0x30, 0x02, 0x8d, 0x07,
	0x0c, 0xe6, 0x07, 0xa0, 0xd9, 0x0a, 0xb8, 0x04,
	0x20, 0x45, 0x02, 0x80, 0xc0, 0x62, 0x8d, 0x07,
	0x0c, 0xd6, 0x07, 0xa0, 0xd9, 0x0a, 0x1c, 0x09,
	0x30, 0x42, 0x20, 0x8a, 0x0f, 0xdf, 0x1c, 0x00,
	0x30, 0x04, 0x1c, 0x02, 0x33, 0xc4, 0x70, 0xcf,
	0x00, 0x00, 0x82, 0x0c, 0x0b, 0x42, 0x03, 0x60,
	0x71, 0x8b, 0xf0, 0x4f, 0x76, 0x8b, 0x0d, 0x7a,
	0x03, 0x60, 0xd8, 0x00, 0xa5, 0x00, 0x70, 0xcf,
	0xff, 0x00, 0x3f, 0xfc, 0x90, 0x02, 0x78, 0x1d,
	0xb8, 0xc0, 0xad, 0x08, 0xd8, 0x01, 0xae, 0x00,
	0xd8, 0x00, 0xae, 0x01, 0x8d, 0x08, 0x6e, 0xe4,
	0xe0, 0x80, 0x20, 0xca, 0x00, 0x62, 0xae, 0x02,
	0xd8, 0x41, 0xb8, 0x09, 0x08, 0x5e, 0x03, 0x20,
	0x71, 0xc9, 0xd8, 0x00, 0xae, 0x00, 0xd8, 0x14,
	0xb6, 0x02, 0x70, 0xcf, 0x00, 0x00, 0x82, 0x05,
	0x0d, 0xce, 0x03, 0x20, 0x71, 0xc9, 0xd8, 0x01,
	0xae, 0x00, 0x8d, 0x08, 0xe0, 0x80, 0x20, 0x8a,
	0x02, 0x08, 0x20, 0xca, 0x0f, 0x81, 0x00, 0x00,
	0x01, 0xc2, 0xb7, 0x00, 0x70, 0xcf, 0x00, 0x00,
	0x82, 0x05, 0x0d, 0xae, 0x03, 0x20, 0x71, 0xc9,
	0xd8, 0x06, 0xae, 0x00, 0xd8, 0xa0, 0xb8, 0x9d,
	0xa7, 0x00, 0x70, 0xcf, 0x00, 0x00, 0x82, 0x05,
	0x0d, 0x96, 0x03, 0x20, 0x71, 0xc9, 0xd8, 0x07,
	0xae, 0x00, 0x70, 0xcf, 0xe0, 0xe0, 0xe0, 0xf0,
	0xa7, 0x00, 0x70, 0xcf, 0x00, 0x00, 0x82, 0x05,
	0x0d, 0x7e, 0x03, 0x20, 0x71, 0xc9, 0x09, 0x6e,
	0x04, 0x20, 0x85, 0x00, 0x03, 0x99, 0x07, 0xa0,
	0xc0, 0xa4, 0x78, 0xe0, 0xc0, 0xf1, 0x0b, 0x2e,
	0x07, 0xa0, 0xd9, 0x0c, 0xc1, 0xa5, 0xdd, 0x00,
	0x76, 0xcf, 0xff, 0xff, 0xe9, 0x8c, 0x0d, 0x52,
	0x07, 0xa0, 0x70, 0xc9, 0x70, 0xcf, 0xff, 0xff,
	0xe7, 0xa8, 0x71, 0xc9, 0x72, 0xa9, 0x0e, 0x56,
	0x03, 0xe0, 0x73, 0xa9, 0xe8, 0x06, 0x0f, 0x16,
	0x03, 0xe0, 0xd9, 0x0a, 0x70, 0xa9, 0xf0, 0x14,
	0x75, 0x8b, 0x70, 0xa9, 0x71, 0xcf, 0xff, 0xff,
	0xe9, 0x98, 0x09, 0x0a, 0x07, 0xa0, 0xda, 0x12,
	0x70, 0xcf, 0xff, 0xff, 0xe0, 0x50, 0x80, 0x03,
	0xe0, 0x80, 0x0e, 0xe0, 0x07, 0x22, 0x20, 0xca,
	0x03, 0x42, 0xd8, 0x07, 0x03, 0x41, 0x07, 0xa0,
	0xc0, 0xa5, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x54, 0x43, 0x47, 0x65, 0x6e, 0x20, 0x66, 0x32,
	0x63, 0x72, 0x38, 0x20, 0x74, 0x61, 0x73, 0x6b,
	0x0a, 0x00
};

/*
 * 1) The Overlay Manager should only permit one active bitmap properties
 *    to be updated per frame. If the OVRL_SET_BITMAP_PROP command is
 *    issued for a second active bitmap before the end of the current
 *    frame, this command should be rejected with EBUSY. However, a
 *    firmware defect means that this second command is not rejected,
 *    and the updated property is  applied to the first bitmap.
 * 2) Due to a firmware defect, the Overlay Manager does not support
 *    retrieval of bitmap cropping properties (via OVRL_GET_BITMAP_PROP).
 * 3) Due to a firmware defect, the Overlay Manager does not support
 *    setting bitmap cropping properties (via OVRL_SET_BITMAP_PROP) if the
 *    bitmap is disabled (not actively being displayed by an overlay layer).
 */
PATCH(0x0211, 0x01030611,
	0x0BD8, 0xE9AC, 696) = {
	0xc0, 0xf1, 0x0a, 0xae, 0x07, 0x80, 0x75, 0x08,
	0x88, 0x01, 0xb8, 0x72, 0x08, 0x53, 0x01, 0x35,
	0xc1, 0xa5, 0x8d, 0x00, 0x76, 0x8b, 0x0a, 0xf2,
	0x06, 0xa0, 0x71, 0xc9, 0x8d, 0x01, 0xb8, 0x72,
	0x08, 0x35, 0x01, 0x15, 0x27, 0x40, 0x72, 0x82,
	0x7a, 0x15, 0x7a, 0x20, 0x95, 0x22, 0x00, 0x13,
	0x00, 0x00, 0x00, 0x15, 0x00, 0x00, 0x00, 0x17,
	0x00, 0x00, 0x00, 0x19, 0x00, 0x00, 0x1c, 0x08,
	0x30, 0x44, 0xf0, 0x0a, 0x1c, 0x0a, 0x30, 0x44,
	0xf0, 0x06, 0x1c, 0x0c, 0x30, 0x44, 0xf0, 0x04,
	0x1c, 0x0e, 0x30, 0x44, 0x8d, 0x00, 0x0a, 0x4a,
	0x06, 0xa0, 0x71, 0xc9, 0xf0, 0x04, 0x09, 0x96,
	0x03, 0x20, 0x70, 0xa9, 0x02, 0xb5, 0x07, 0xa0,
	0xc0, 0xa5, 0x78, 0xe0, 0xc0, 0xf1, 0x0a, 0x3e,
	0x07, 0xa0, 0xd8, 0x04, 0x11, 0x01, 0x00, 0x84,
	0x76, 0x28, 0x71, 0xcf, 0x00, 0x08, 0x60, 0x9a,
	0xda, 0x02, 0x08, 0xb6, 0x07, 0x60, 0x8e, 0x60,
	0x8e, 0x20, 0x77, 0xcf, 0x80, 0x00, 0x05, 0x04,
	0xe1, 0x84, 0x00, 0xa4, 0x00, 0x29, 0x21, 0xca,
	0x03, 0x29, 0x0d, 0x06, 0x07, 0x60, 0x69, 0x74,
	0x75, 0xcf, 0x80, 0x00, 0x00, 0x80, 0x85, 0x00,
	0xe0, 0x01, 0xa5, 0x00, 0x27, 0x56, 0x12, 0x80,
	0x60, 0x7a, 0x8a, 0x43, 0x60, 0x78, 0x0a, 0x27,
	0x00, 0x90, 0x88, 0x62, 0xe3, 0x80, 0x21, 0xca,
	0x00, 0x61, 0xf2, 0x34, 0xe2, 0x83, 0xdb, 0x01,
	0x7b, 0xc0, 0x0a, 0x17, 0x00, 0xd1, 0x17, 0xa0,
	0x10, 0x82, 0xe2, 0x85, 0x21, 0xcc, 0x80, 0x82,
	0xf2, 0x03, 0xd9, 0x09, 0xf0, 0x26, 0x8e, 0x21,
	0x09, 0x19, 0x01, 0x10, 0x09, 0x1b, 0x03, 0x90,
	0x09, 0x31, 0x03, 0xd0, 0xeb, 0x1b, 0x70, 0xe9,
	0x0f, 0xe6, 0x02, 0xe0, 0x71, 0xc9, 0xf0, 0x19,
	0x96, 0x22, 0xb0, 0x20, 0xf0, 0x08, 0x8e, 0x24,
	0x61, 0x39, 0x79, 0x35, 0x26, 0x2f, 0xf0, 0x48,
	0xb0, 0x24, 0xf4, 0x04, 0xd9, 0x00, 0xf0, 0x0e,
	0x90, 0x45, 0xea, 0xfe, 0xb0, 0x25, 0xf1, 0xfc,
	0x8e, 0x24, 0x61, 0x39, 0x79, 0x35, 0xb0, 0x23,
	0xf1, 0xf6, 0x70, 0xc9, 0xff, 0xb7, 0x71, 0x08,
	0x85, 0x00, 0x20, 0x80, 0x8f, 0xff, 0xa5, 0x00,
	0x0c, 0x9c, 0x07, 0x41, 0x01, 0xdd, 0x07, 0xa0,
	0x70, 0x28, 0x78, 0xe0, 0xc0, 0xf1, 0x09, 0x6a,
	0x07, 0xa0, 0xda, 0x02, 0xc1, 0xa6, 0x11, 0x01,
	0x00, 0x84, 0x70, 0x1a, 0x75, 0x28, 0xd8, 0x04,
	0x71, 0xcf, 0x00, 0x08, 0x61, 0x05, 0x0f, 0xe2,
	0x07, 0x20, 0x8d, 0x60, 0x8d, 0x00, 0x76, 0x8b,
	0xe0, 0x84, 0x00, 0xc4, 0x00, 0x29, 0x20, 0xca,
	0x23, 0x29, 0x0c, 0x36, 0x07, 0x40, 0x77, 0xcf,
	0x80, 0x00, 0x00, 0x80, 0x87, 0x40, 0x71, 0xcf,
	0x80, 0x00, 0x05, 0x56, 0x6a, 0x01, 0xa7, 0x00,
	0x8d, 0x00, 0x68, 0x74, 0x61, 0x69, 0xe1, 0x80,
	0x20, 0xca, 0x20, 0x61, 0xf2, 0x3c, 0x8d, 0x21,
	0xb9, 0x71, 0x09, 0x83, 0x01, 0x55, 0x09, 0x72,
	0x06, 0xa0, 0xc1, 0x81, 0x70, 0x1a, 0x8d, 0x01,
	0xb8, 0x71, 0x08, 0x5b, 0x01, 0x55, 0x27, 0x40,
	0x72, 0x81, 0x79, 0x15, 0x79, 0x00, 0x00, 0x37,
	0x00, 0x00, 0x00, 0x13, 0x00, 0x00, 0x00, 0x17,
	0x00, 0x00, 0x00, 0x1b, 0x00, 0x00, 0x00, 0x1f,
	0x00, 0x00, 0x14, 0x0c, 0x31, 0x00, 0xb6, 0x00,
	0xf0, 0x19, 0x14, 0x0e, 0x31, 0x00, 0xb6, 0x00,
	0xf0, 0x15, 0x14, 0x10, 0x31, 0x00, 0xb6, 0x00,
	0xf0, 0x11, 0x14, 0x12, 0x31, 0x00, 0xb6, 0x00,
	0xf0, 0x0d, 0xc0, 0x05, 0xb8, 0xfe, 0xb8, 0x3d,
	0x20, 0xd2, 0x00, 0x22, 0x20, 0xd3, 0x00, 0x22,
	0x20, 0xc0, 0x00, 0x62, 0x20, 0xca, 0x00, 0x21,
	0xae, 0x00, 0x70, 0xa9, 0x71, 0xc9, 0x0e, 0xca,
	0x07, 0x60, 0xda, 0x04, 0x87, 0x00, 0x20, 0x80,
	0x8f, 0xff, 0xa7, 0x00, 0x0b, 0xc0, 0x07, 0x41,
	0xf0, 0x0a, 0xe2, 0x80, 0xa7, 0x40, 0x0b, 0xb8,
	0x07, 0x41, 0x70, 0x0a, 0x09, 0x8a, 0x03, 0x20,
	0x71, 0xa9, 0x70, 0x1a, 0x70, 0x0a, 0x00, 0xe5,
	0x07, 0xa0, 0xc0, 0xa6, 0xc0, 0xf1, 0x08, 0x82,
	0x07, 0x80, 0x0a, 0xb6, 0x01, 0x20, 0xc1, 0xa4,
	0x0f, 0xd6, 0x03, 0xc0, 0x26, 0x0a, 0x90, 0x00,
	0x26, 0xcc, 0x91, 0xa2, 0xf4, 0x1b, 0xe6, 0x80,
	0xdd, 0x01, 0x71, 0xcf, 0xff, 0xff, 0xea, 0x18,
	0x70, 0xcf, 0x00, 0x00, 0x82, 0x03, 0x0d, 0x4a,
	0x01, 0x20, 0x7d, 0xc0, 0x71, 0xcf, 0xff, 0xff,
	0xea, 0xe8, 0x70, 0xcf, 0x00, 0x00, 0x82, 0x04,
	0x0d, 0x36, 0x01, 0x00, 0x76, 0x08, 0xed, 0x07,
	0x0a, 0x76, 0x01, 0x00, 0x0f, 0xd2, 0x03, 0xe0,
	0xd9, 0x00, 0xee, 0x13, 0x75, 0x8b, 0x70, 0xa9,
	0x71, 0xcf, 0xff, 0xff, 0xec, 0x54, 0x0e, 0x42,
	0x07, 0x60, 0xda, 0x10, 0x70, 0xcf, 0xff, 0xff,
	0xe0, 0x50, 0x80, 0x03, 0xe0, 0x80, 0x0c, 0x18,
	0x07, 0x22, 0x20, 0xca, 0x03, 0x42, 0x70, 0xc9,
	0x00, 0x79, 0x07, 0xa0, 0xc0, 0xa4, 0x00, 0x00,
	0x4f, 0x56, 0x70, 0x74, 0x20, 0x66, 0x32, 0x72,
	0x65, 0x67, 0x20, 0x63, 0x6d, 0x64, 0x73, 0x00
};

/*
 * De-warp subsystem patch – fixes problems when enabling de-warp in both
 * progressive and protected modes
 */
PATCH(0x0511, 0x01030611,
	0x153C, 0xF53C, 316) = {
	0x71, 0xcf, 0x80, 0x00, 0x03, 0xb4, 0x81, 0x0a,
	0x72, 0xcf, 0xff, 0xff, 0xf6, 0x70, 0xb8, 0xbe,
	0xb8, 0x9e, 0xa1, 0x0a, 0xd8, 0x00, 0x22, 0x15,
	0x00, 0x01, 0x81, 0x61, 0xe0, 0x02, 0x81, 0x20,
	0x08, 0xf7, 0x80, 0xb4, 0xa1, 0x60, 0x7f, 0xe0,
	0xd8, 0x00, 0x78, 0xe0, 0xc0, 0xf1, 0x0e, 0xf2,
	0x07, 0x20, 0xda, 0x00, 0x76, 0x08, 0x71, 0xcf,
	0x00, 0x08, 0xc0, 0x4d, 0x0d, 0x6a, 0x06, 0xe0,
	0xd8, 0x08, 0x09, 0xce, 0x07, 0x00, 0x75, 0xcf,
	0x80, 0x00, 0x00, 0x80, 0x85, 0x00, 0xe0, 0x01,
	0x86, 0x2a, 0xa5, 0x00, 0xb9, 0xfb, 0x29, 0xc1,
	0x07, 0x21, 0x20, 0xca, 0x00, 0x61, 0x0a, 0xf8,
	0x05, 0xe1, 0x21, 0xd3, 0x00, 0x21, 0x86, 0x0a,
	0x08, 0x1d, 0x06, 0x1e, 0xd8, 0x02, 0x0b, 0xa6,
	0x05, 0xe0, 0xd9, 0x00, 0xd8, 0x02, 0x0b, 0x42,
	0x05, 0xe0, 0xd9, 0x01, 0x0b, 0x22, 0x05, 0xe0,
	0xd8, 0x01, 0xf0, 0x06, 0x70, 0xc9, 0x0c, 0x0a,
	0x01, 0x60, 0xd9, 0x09, 0x85, 0x00, 0x20, 0x80,
	0x8f, 0xff, 0xa5, 0x00, 0x09, 0xa8, 0x07, 0x01,
	0x06, 0xf1, 0x07, 0x00, 0xc0, 0xf1, 0x88, 0x29,
	0x09, 0x0f, 0x02, 0x11, 0xa8, 0x28, 0xd9, 0x00,
	0xa8, 0x29, 0xff, 0xe1, 0xf0, 0x03, 0x0f, 0xb2,
	0x01, 0x40, 0xc0, 0xd1, 0x7e, 0xe0, 0x78, 0xe0,
	0xc0, 0xf1, 0xc5, 0xe1, 0x0a, 0xd6, 0x03, 0xa0,
	0x75, 0x08, 0x85, 0x21, 0xe9, 0x07, 0x08, 0x0f,
	0x00, 0x41, 0x0b, 0x6a, 0x01, 0x60, 0x70, 0xa9,
	0xf0, 0x29, 0x85, 0x20, 0x08, 0x2d, 0x00, 0x41,
	0x15, 0x20, 0x10, 0x80, 0x08, 0x0d, 0x00, 0xd1,
	0x0a, 0xd6, 0x01, 0xa0, 0x70, 0xa9, 0xf0, 0x1f,
	0x8d, 0x30, 0x70, 0xa9, 0x09, 0x11, 0x00, 0xd1,
	0x09, 0x12, 0x01, 0x80, 0x0b, 0xe6, 0x01, 0x60,
	0x70, 0xa9, 0xf0, 0x15, 0xff, 0xe8, 0xf0, 0x13,
	0xe8, 0x8b, 0xd8, 0x01, 0xad, 0x08, 0xd8, 0x08,
	0x71, 0xcf, 0x00, 0x08, 0xc0, 0xc7, 0x0c, 0x9a,
	0x06, 0xe0, 0xda, 0x00, 0xf0, 0x07, 0x71, 0xcf,
	0xff, 0xff, 0xf6, 0x6c, 0x0b, 0xca, 0x00, 0x60,
	0xd8, 0xb0, 0x70, 0xa9, 0x0c, 0x8a, 0x03, 0xa0,
	0xd9, 0x02, 0x06, 0x69, 0x07, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x01, 0x3c,
	0xff, 0xff, 0xf5, 0xf4
};

/*
 * Sensor gains synchronization patch – fixes the 1 frame ‘flicker’ seen
 * when switching extended gains.
 * This critical patch MUST be applied in all circumstances.
 */
PATCH(0x0611, 0x01030611,
	0x16A8, 0xF678, 100) = {
	0x72, 0xcf, 0x80, 0x00, 0x02, 0xb0, 0x82, 0x40,
	0x92, 0x69, 0x08, 0x0b, 0x00, 0xc2, 0x6b, 0x09,
	0x78, 0x10, 0x92, 0x68, 0x21, 0x09, 0x00, 0xc1,
	0x92, 0x67, 0x21, 0x08, 0x00, 0xc1, 0x72, 0xcf,
	0xff, 0xff, 0xe1, 0x18, 0x92, 0x58, 0xe2, 0x80,
	0x21, 0xca, 0x00, 0xc2, 0x00, 0x41, 0x05, 0x40,
	0xd8, 0x00, 0x73, 0xcf, 0xff, 0xff, 0xf6, 0xd4,
	0x23, 0x15, 0x00, 0x01, 0x81, 0x41, 0xe0, 0x02,
	0x81, 0x20, 0x08, 0xf9, 0x80, 0xb4, 0xa1, 0x40,
	0x70, 0xcf, 0x80, 0x00, 0x02, 0xb0, 0x80, 0x00,
	0x90, 0x27, 0x70, 0xcf, 0xff, 0x00, 0x30, 0x0c,
	0xb0, 0x24, 0x7e, 0xe0, 0x80, 0x00, 0x02, 0x38,
	0xff, 0xff, 0xf6, 0x78
};

/*
 * The firmware incorrectly limits the saturation control range from 0 to 127
 * (rather than the full 0 to 255). This patch removes this restriction and
 * allows the full 0-255 range of saturation control.
 */
PATCH(0x0711, 0x01030611,
	0xF6DC, 0x1728, 112) = {
	0xc0, 0xf1, 0x0d, 0x7a, 0x07, 0x00, 0x70, 0xcf,
	0x00, 0x00, 0x83, 0x6a, 0x78, 0x40, 0x77, 0xcf,
	0xff, 0xff, 0xe1, 0x5c, 0x97, 0xb9, 0x25, 0x8c,
	0x90, 0x02, 0xf6, 0x98, 0xd9, 0x00, 0x27, 0x14,
	0x10, 0x4e, 0x72, 0xcf, 0x00, 0x00, 0xe4, 0x4c,
	0x22, 0xf5, 0x00, 0x42, 0x9e, 0x05, 0xe1, 0x01,
	0x79, 0x2f, 0x78, 0x42, 0x78, 0xac, 0x29, 0x42,
	0x71, 0x83, 0xbb, 0x39, 0x73, 0x27, 0xbb, 0x47,
	0x62, 0x7a, 0x09, 0xdf, 0x82, 0x72, 0xb6, 0x45,
	0x05, 0x99, 0x07, 0x00, 0xd8, 0x00, 0x73, 0xcf,
	0xff, 0xff, 0xf7, 0x44, 0x23, 0x15, 0x00, 0x01,
	0x81, 0x41, 0xe0, 0x02, 0x81, 0x20, 0x08, 0xf9,
	0x80, 0xb4, 0xa1, 0x40, 0x7e, 0xe0, 0x00, 0x00,
	0x80, 0x00, 0x02, 0x08, 0xff, 0xff, 0xf6, 0xdc
};

/*
 * AE ‘Indoor’ patch – prevents the AE Track algorithm entering zone 0
 * (this means that coarse integration time will be always a multiple of
 * the Flicker period). This new operation is enabled by setting bit 4 in
 * the AE_TRACK_ALGO register (after the patch has been successfully loaded
 * and applied). One of the limitations is that this bit has to be enabled
 * during configuration, the reason is that if we are streaming, already in
 * zone 0 and the AE is stable AE will not re-run and the indoor setting will
 * not be triggered.
 */
PATCH(0x0811, 0x01030611,
	0x1784, 0xF74C, 92) = {
	0xc0, 0xf1, 0x70, 0xcf, 0x00, 0x00, 0x7b, 0xb6,
	0x78, 0x40, 0x71, 0xcf, 0xff, 0xff, 0xe1, 0x18,
	0x91, 0x18, 0xe8, 0x91, 0x91, 0x02, 0x08, 0x1f,
	0x01, 0x1e, 0xd8, 0x01, 0xb1, 0x18, 0x91, 0x14,
	0x91, 0x52, 0x78, 0x4c, 0x70, 0xcf, 0xff, 0xff,
	0xe3, 0x04, 0x90, 0x19, 0x19, 0x3c, 0x0e, 0x40,
	0xb1, 0x15, 0xc0, 0xd1, 0x7e, 0xe0, 0x78, 0xe0,
	0xd8, 0x00, 0x73, 0xcf, 0xff, 0xff, 0xf7, 0xa0,
	0x23, 0x15, 0x00, 0x01, 0x81, 0x41, 0xe0, 0x02,
	0x81, 0x20, 0x08, 0xf9, 0x80, 0xb4, 0xa1, 0x40,
	0x7e, 0xe0, 0x00, 0x00, 0x80, 0x00, 0x01, 0xfc,
	0xff, 0xff, 0xf7, 0x4c
};

/*
 * This patch dampens the red/green and blue/green ratios which control the
 * white-balance and CCM position calculations. By dampening the ratios,
 * the speed with which the AWB algorithm adjusts the white-balance and the
 * CCM position can be controlled. The patch uses CAM1_AET_EXT_GAIN_SETUP_0
 * (VAR=18,0x00BE) to control the dampening factor (no other firmware
 * algorithm uses this variable). The range of values are 1 to 32, where 32
 * is no dampening, and 1 is maximum dampening. For backwards-compatibility,
 * the default dampening factor upon loading the patch is 32. To prevent
 * possible AWB oscillation, Aptina recommends using this patch and setting
 * the dampening factor to 16.
 */
PATCH(0x0911, 0x01030611,
	0x17E4, 0xF7A8, 132) = {
	0xc0, 0xf1, 0x0c, 0xae, 0x07, 0x00, 0x70, 0xcf,
	0x00, 0x00, 0x84, 0x62, 0x78, 0x40, 0x77, 0xcf,
	0xff, 0xff, 0xe3, 0x40, 0x97, 0x25, 0x76, 0xcf,
	0xff, 0xff, 0xf8, 0x20, 0x6e, 0x02, 0x75, 0xcf,
	0xff, 0xff, 0xe1, 0x98, 0x0f, 0xa2, 0x04, 0xe0,
	0x95, 0x46, 0x97, 0x25, 0xb5, 0x06, 0x70, 0xc9,
	0x0f, 0x96, 0x04, 0xe0, 0x95, 0x47, 0x04, 0xe1,
	0x07, 0x20, 0xb5, 0x07, 0xd8, 0x00, 0x73, 0xcf,
	0xff, 0xff, 0xf8, 0x24, 0x23, 0x15, 0x00, 0x01,
	0x81, 0x41, 0xe0, 0x02, 0x81, 0x20, 0x08, 0xf9,
	0x80, 0xb4, 0xa1, 0x40, 0x70, 0xcf, 0xff, 0xff,
	0xe3, 0x40, 0xd9, 0x20, 0xb0, 0x25, 0x72, 0xcf,
	0xff, 0xff, 0xe1, 0x98, 0x92, 0x07, 0x71, 0xcf,
	0xff, 0xff, 0xf8, 0x20, 0xb8, 0x05, 0xb1, 0x00,
	0x92, 0x06, 0xb8, 0x05, 0x7f, 0xe0, 0xb1, 0x01,
	0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x02, 0x0c,
	0xff, 0xff, 0xf7, 0xa8
};

/*
 * The SOC firmware supports fixed 60/50 frames-per-second operation for
 * NTSC/PAL video modes. However, in some cases the user may want variable
 * frame-rate operation (provided the progressive output through the parallel
 * port is selected). This patch removes the 'hard' 60/50 frames-per-second
 * restriction and allows the host to control the minimum frame-rate through
 * the CAM1_SENSOR_0_MAX_FDZONE_n variables, and the maximum frame-rate
 * through CAM1_SENSOR_0_FRAME_LENGTH_LINES. Variable frame-rate support is
 * enabled by default by applying this patch.
 * Variable frame rate can be disabled by setting bit 5 inthe AE_TRACK_ALGO
 * register.
 *
 * Note: the auto-synchronization feature required for NTSC/PAL operation MUST
 * be disabled before the frame rate can be changed. It is highly recommended
 * that this patch is loaded AFTER switching to progressive output and
 * disabling auto- synchronization using Host Command 0x8300.
 *
 * This patch incorporates the changes in patch 6. As a result, when loading
 * this patch, it is not necessary to load patch 6.
 */
PATCH(0x1411, 0x01030611,
	0x1C0C, 0xFBCC, 116) = {
	0xc0, 0xf1, 0xc5, 0xe1, 0x73, 0xcf, 0xff, 0xff,
	0xe1, 0x18, 0x93, 0x42, 0x22, 0x51, 0x81, 0x40,
	0x72, 0xcf, 0x80, 0x00, 0x02, 0xb0, 0x82, 0x40,
	0xf2, 0x06, 0x92, 0xa9, 0x08, 0x09, 0x03, 0x42,
	0x6d, 0x09, 0x78, 0x10, 0x92, 0xa8, 0x21, 0x09,
	0x03, 0x41, 0x92, 0xa7, 0x21, 0x08, 0x03, 0x41,
	0x93, 0x58, 0xe2, 0x80, 0x21, 0xca, 0x03, 0x42,
	0x0a, 0xe2, 0x05, 0x00, 0x00, 0xc5, 0x07, 0x00,
	0xd8, 0x00, 0x73, 0xcf, 0xff, 0xff, 0xfc, 0x38,
	0x23, 0x15, 0x00, 0x01, 0x81, 0x41, 0xe0, 0x02,
	0x81, 0x20, 0x08, 0xf9, 0x80, 0xb4, 0xa1, 0x40,
	0x70, 0xcf, 0x80, 0x00, 0x02, 0xb0, 0x80, 0x00,
	0x90, 0x27, 0x70, 0xcf, 0xff, 0x00, 0x30, 0x0c,
	0xb0, 0x24, 0x7e, 0xe0, 0x80, 0x00, 0x02, 0x38,
	0xff, 0xff, 0xfb, 0xcc
};

const struct mt9v126_patch *mt9v126_patches[] = {
/*	&patch_0x0111, */
/*	&patch_0x0211, */
/*	&patch_0x0511, */
	&patch_0x0611,
	&patch_0x0711,
/*	&patch_0x0811, */
	&patch_0x0911,
/*	&patch_0x1411, */
	NULL
};
